<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBQ Salt Calculator</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>ðŸ”¥ BBQ Salt Calculator</h1>
            <p>Calculate how much additional salt to add to your BBQ ribs based on your rub's sodium content</p>
        </header>

        <div class="calculator-section">
            <form action="/calculate" method="POST" class="calculator-form">
                <div class="input-group">
                    <label for="ribWeight">Rib Weight (lbs):</label>
                    <input type="number" id="ribWeight" name="ribWeight" step="0.1" min="0.1" max="20"
                        value="<%= inputs.ribWeight %>" placeholder="e.g., 2.5" required>
                    <small>Average rack is about 2 lbs</small>
                </div>

                <div class="input-group">
                    <label for="rubSodium">Rub Sodium per 1/4 tsp (mg):</label>
                    <input type="range" id="rubSodiumSlider" min="100" max="300" step="10"
                        value="<%= inputs.rubSodium || 150 %>" oninput="updateSodiumValue(this.value)">
                    <input type="number" id="rubSodium" name="rubSodium" min="100" max="300"
                        value="<%= inputs.rubSodium %>" placeholder="150" oninput="updateSodiumSlider(this.value)"
                        required>
                    <small>Range: 100-300 mg (Famous Dave's: 110mg, Joe's Big Meat: 210mg)</small>
                </div>

                <button type="submit" class="calculate-btn">Calculate Salt Needed</button>
            </form>

            <% if (typeof error !=='undefined' && error) { %>
                <div class="error">
                    <%= error %>
                </div>
                <% } %>
        </div>

        <% if (calculation) { %>
            <div class="results-section">
                <h2>ðŸ“Š Calculation Results</h2>

                <div class="result-card">
                    <h3>Rib Information</h3>
                    <div class="result-item">
                        <span class="label">Weight:</span>
                        <span class="value">
                            <%= inputs.ribWeight %> lbs
                        </span>
                    </div>
                    <div class="result-item">
                        <span class="label">Estimated racks:</span>
                        <span class="value">
                            <%= calculation.rubCalculation.numberOfRacks %>
                        </span>
                    </div>
                    <div class="result-item">
                        <span class="label">Rub needed:</span>
                        <span class="value">
                            <%= calculation.rubCalculation.totalRubTbsp %> tbsp
                        </span>
                    </div>
                </div>

                <div class="result-card">
                    <h3>Sodium Analysis</h3>
                    <div class="result-item">
                        <span class="label">Recommended total sodium:</span>
                        <span class="value">
                            <%= calculation.recommendedTotalSodium %> mg
                        </span>
                    </div>
                    <div class="result-item">
                        <span class="label">Sodium from rub (<%= inputs.rubSodium %>mg per 1/4 tsp):</span>
                        <span class="value">
                            <%= calculation.sodiumFromRub %> mg
                        </span>
                    </div>
                    <div class="result-item highlight">
                        <span class="label">Additional sodium needed:</span>
                        <span class="value">
                            <%= calculation.additionalSodiumNeeded %> mg
                        </span>
                    </div>
                </div>

                <div class="result-card main-result">
                    <h3>ðŸ§‚ Additional Salt Required</h3>
                    <div class="big-result">
                        <span class="salt-amount">
                            <%= calculation.additionalSaltTsp %>
                        </span>
                        <span class="unit">teaspoons of kosher salt</span>
                    </div>
                    <% if (parseFloat(calculation.additionalSaltTsp)===0) { %>
                        <p class="note">âœ… Your rub already provides enough sodium!</p>
                        <% } else { %>
                            <p class="note">Add this amount of kosher salt in addition to your rub</p>
                            <% } %>
                </div>

                <div class="preset-examples">
                    <h3>Quick Reference</h3>
                    <div class="preset-grid">
                        <div class="preset-item">
                            <strong>Famous Dave's Rib Rub</strong><br>
                            110 mg per 1/4 tsp
                        </div>
                        <div class="preset-item">
                            <strong>Joe's Big Meat Seasoning</strong><br>
                            210 mg per 1/4 tsp
                        </div>
                        <div class="preset-item">
                            <strong>Kosher Salt Reference</strong><br>
                            480 mg per 1 tsp
                        </div>
                    </div>
                </div>
            </div>
            <% } %>

                <footer>
                    <p>ðŸ’¡ Based on 400mg recommended sodium per lb for baby back ribs</p>
                </footer>
    </div>

    <script>
        function updateSodiumValue(value) {
            document.getElementById('rubSodium').value = value;
        }

        function updateSodiumSlider(value) {
            document.getElementById('rubSodiumSlider').value = value;
        }

        // Preset buttons functionality
        function setPreset(sodiumValue, name) {
            document.getElementById('rubSodium').value = sodiumValue;
            document.getElementById('rubSodiumSlider').value = sodiumValue;
        }
    </script>
</body>

</html>